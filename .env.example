# Django Configuration
DJANGO_SETTINGS_MODULE=api_backend.settings
SECRET_KEY=your-secret-key-here
DEBUG=1
ALLOWED_HOSTS=*

# MySQL Database Configuration
MYSQL_HOST=db
MYSQL_PORT=3306
MYSQL_DATABASE=your_database_name
MYSQL_USER=your_database_user
MYSQL_PASSWORD=your_database_password
MYSQL_ROOT_PASSWORD=your_root_password

# Redis/Celery Configuration
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# Development Superuser (remove in production)
DJANGO_SU_EMAIL=admin@example.com
DJANGO_SU_PASSWORD=change_this_password

# IA Local (Ollama)
AI_PROVIDER=ollama
# Si ejecutas Django en contenedores y Ollama en tu host:
#   Windows/Mac: http://host.docker.internal:11434
#   Linux: usa la IP del host o agrega extra_hosts en docker-compose
OLLAMA_BASE_URL=http://host.docker.internal:11434
OLLAMA_MODEL=llama3.1:8b
LLM_TEMPERATURE=0.2
LLM_TIMEOUT_SECONDS=240
# Opciones avanzadas de Ollama (opcionales)
# Tokens de contexto (entrada+salida). Ej.: 8192 o 16000 si el modelo lo soporta
OLLAMA_NUM_CTX=16384
# Tokens máximos de salida. Ej.: 1024
OLLAMA_NUM_PREDICT=1200
# Mantener el modelo cargado tras la última llamada (ej.: 15m, 30m, 2h)
OLLAMA_KEEP_ALIVE=15m
AI_SCHEMA_VERSION=v1
DESCRIPTORS_DELETE_ON_SKIP=false
SUBJECT_CODE_UPPERCASE=true
SUBJECT_NAME_TITLECASE=true

# OpenAI (opcional). Usar si AI_PROVIDER=openai
# OPENAI_API_KEY=sk-...
# OPENAI_MODEL=gpt-4o-mini
# OPENAI_BASE_URL=https://api.openai.com/v1
#
# Rate limiting sugerido para evitar 429 (opcional)
#   RPM: solicitudes por minuto (ej.: 2)
#   TPM: tokens por minuto (entrada+salida). Con ~8k in y ~1k out, 20k TPM ≈ 2 req/min.
# OPENAI_RPM=2
# OPENAI_TPM=20000
# OPENAI_EST_COMPLETION_TOKENS=1200
# Límite máximo de espera por Retry-After (segundos) durante backoff
# OPENAI_RETRY_AFTER_CAP=60
# Intervalo mínimo entre llamadas (segundos). Si se incumple, la tarea se reprograma en Celery
# OPENAI_MIN_INTERVAL_SECONDS=240
# Controla si esperar/reintentar ante 429/5xx (reactivo). Si pones 0/false, no espera ni reintenta (falla rápido)
# OPENAI_WAIT_ON_429=1
#
# Redis que usará el rate limiter (si no se define, usa CELERY_BROKER_URL)
# OPENAI_REDIS_URL=redis://redis:6379/0

# Defaults for automatic Subject creation
DEFAULT_SUBJECT_SECTION=1
DEFAULT_SUBJECT_CAMPUS=Chillán
DEFAULT_SUBJECT_API_TYPE=2
DEFAULT_SUBJECT_HOURS=0
DEFAULT_SEMESTER_LEVEL_NAME=Primero
DEFAULT_AREA_IF_UNSURE=Administracion
# Periodo inicial para `PeriodSetting` (el admin podrá modificarlo luego desde el panel)
SUBJECT_DEFAULT_PERIOD=P-2025
